{% extends 'base.html' %}

{% block title %}自然语言问答 - 智能问答系统{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h1 class="text-center">自然语言问答</h1>
            <p class="text-center text-white-80">输入您的问题，系统将自动分析并提供答案</p>
        </div>
        <div class="card-body p-5">
            {% if error %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
            {% endif %}
            
            <form method="POST" class="mb-5">
                <div class="form-group">
                    <label for="question" class="font-weight-bold">请输入您的问题：</label>
                    <textarea id="question" name="question" class="form-control" rows="4" placeholder="例如：苹果公司和iPhone之间有什么关系？" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="top_k" class="font-weight-bold">返回结果数量：</label>
                    <select id="top_k" name="top_k" class="form-control">
                        <option value="3">3</option>
                        <option value="5" selected>5</option>
                        <option value="10">10</option>
                    </select>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg btn-block">
                    <i class="fas fa-search"></i> 提问
                </button>
            </form>
            
            <div class="bg-light p-4 rounded-lg">
                <h3 class="text-primary">示例问题：</h3>
                <ul class="list-group">
                    <li class="list-group-item">苹果公司和iPhone之间有什么关系？</li>
                    <li class="list-group-item">微软的产品有哪些？</li>
                    <li class="list-group-item">谁创立了特斯拉？</li>
                    <li class="list-group-item">预测苹果公司未来的发展</li>
                    <li class="list-group-item">人工智能和机器学习之间的区别是什么？</li>
                </ul>
            </div>
        </div>
        
        <div class="card-footer bg-light">
            <h4 class="text-primary">如何获得最佳结果：</h4>
            <ul class="list-unstyled">
                <li><i class="fas fa-check-circle text-success"></i> 尽量使用完整的句子提问</li>
                <li><i class="fas fa-check-circle text-success"></i> 问题要清晰明确，避免模糊表述</li>
                <li><i class="fas fa-check-circle text-success"></i> 对于预测类问题，明确指出需要预测的实体</li>
            </ul>
        </div>
    </div>
    
    <!-- 加载动画 -->
    <div id="loading-indicator" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;"></div>
            <p class="mt-3">正在分析您的问题，请稍候...</p>
        </div>
    </div>
</div>

<style>
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
}

.loading-spinner {
    text-align: center;
    color: #333;
}
</style>

<script>
// 表单提交时显示加载指示器
$('form').submit(function() {
    $('#loading-indicator').show();
});

// 页面加载完成后隐藏加载指示器
$(window).load(function() {
    $('#loading-indicator').hide();
});
</script>
{% endblock %}
